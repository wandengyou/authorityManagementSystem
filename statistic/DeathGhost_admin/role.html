<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>权限管理系统</title>
<meta name="author" content="wandengyou" />
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<link rel="icon" href="images/icon/favicon.ico" type="image/x-icon">
<link rel="stylesheet" type="text/css" href="css/style.css" />
<script src="javascript/jquery.js"></script>
<script src="js/urls.js"></script>
<script src="js/utils.js"></script>
<script src="js/user.js"></script>
</head>
<script>
	function fill_permission_template(form_handle, ajax_response){
		if(ajax_response['code'] == 200){
			form_handle.empty()
			var roles = ajax_response['data']['data']
			$.each(roles, function(index, role){
				var tr = '<tr class="cen">'+
					'<td><input type="checkbox" class="role_checkbox" name="'+role['role_code']+'"/></td>'+
					'<td>'+role['role_name']+'</td>'+
					'<td>'+role['role_code']+'</td>'+
				'</tr>'
				form_handle.append(tr)
			})
		}
	}
	$(function(){
		var index = parent.layer.getFrameIndex(window.name); //获取窗口索引
		
		var request_params = getRequest()
		var response = ajax(request_urls['role'], 'get', {'platform_code': request_params.platform_code})
		fill_permission_template($('#role tbody'), response)
		
// 		$('input[type=checkbox]').click(function(){
// 			 if ($(this).is(':checked')) {
// 				var assign_role_url = request_urls['assign_role']+request_params.user_code+"/"+$(this).attr('name')+"/"
// 				ajax(assign_role_url, 'post')
// 			 }else{
// 				var assign_role_url = request_urls['assign_role']+request_params.user_code+"/"+$(this).attr('name')+"/"
// 				ajax(assign_role_url, 'delete')
// 			 }
// 			 parent.layer.close(index);
// 		})
		
	})
</script>
<body>
	<table class="table mb-15" id="role">
		<thead>
			<tr>
				<th><input type="checkbox"/></th>
				<th>角色名称</th>
				<th>唯一标识</th>
			</tr>
		</thead>
		<tbody>
		</tbody>
	</table>
</body>
</html>
